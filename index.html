<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥è¯­å•è¯æŒ‘æˆ˜</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #ff7e5f;
            --accent: #6b8c42;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
        }
        
        body {
            font-family: 'Noto Sans JP', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            color: var(--dark);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        h1, h2, h3 {
            color: var(--primary);
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.15);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s ease;
        }
        
        input:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .option-btn {
            padding: 1.2rem;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .option-btn:hover {
            border-color: var(--primary);
            background: rgba(74, 111, 165, 0.05);
        }
        
        .timer {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--secondary);
            text-align: center;
            margin: 1.5rem 0;
        }
        
        .word-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            margin: 1.5rem 0;
            min-height: 4rem;
        }
        
        .progress-bar {
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin: 1.5rem 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .result-item {
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(74, 111, 165, 0.1);
            border-radius: 8px;
        }
        
        .result-item span {
            font-weight: 600;
            color: var(--primary);
        }
        
        .hidden {
            display: none;
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .celebrate {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: none;
        }
        
        .first-attempt {
            background-color: rgba(104, 192, 104, 0.2);
            border-left: 5px solid var(--success);
            margin-top: 1.5rem;
        }
        
        .first-attempt-title {
            font-weight: bold;
            color: var(--success);
            margin-bottom: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .word-display {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ç™»å½•ç•Œé¢ -->
        <div id="login-screen" class="card">
            <h1>æ—¥è¯­å•è¯æŒ‘æˆ˜</h1>
            <div class="form-group">
                <label for="student-id">å­¦å·</label>
                <input type="text" id="student-id" placeholder="è¯·è¾“å…¥æ‚¨çš„å­¦å·">
            </div>
            <div class="form-group">
                <label for="student-name">å§“å</label>
                <input type="text" id="student-name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å">
            </div>
            <button id="start-btn" class="btn">å¼€å§‹æŒ‘æˆ˜</button>
        </div>
        
        <!-- æ¸¸æˆç•Œé¢ -->
        <div id="game-screen" class="card hidden">
            <div class="timer" id="timer">03:00</div>
            <div class="progress-bar">
                <div class="progress" id="progress-bar"></div>
            </div>
            <div class="word-display" id="word-display"></div>
            <div class="options-grid" id="options-grid"></div>
        </div>
        
        <!-- ç»“æœç•Œé¢ -->
        <div id="result-screen" class="card hidden">
            <h1>æŒ‘æˆ˜ç»“æœ</h1>
            <div class="result-item">
                <span>å§“å:</span> <span id="result-name"></span>
            </div>
            <div class="result-item">
                <span>å­¦å·:</span> <span id="result-id"></span>
            </div>
            <div class="result-item">
                <span>æœ¬æ¬¡ç­”å¯¹é¢˜æ•°:</span> <span id="result-score"></span>
            </div>
            <div class="result-item">
                <span>æœ¬æ¬¡æ­£ç¡®ç‡:</span> <span id="result-accuracy"></span>
            </div>
            
            <!-- ç¬¬ä¸€æ¬¡å°è¯•çš„ç»“æœ -->
            <div id="first-attempt-container" class="hidden">
                <div class="first-attempt-title">ç¬¬ä¸€æ¬¡æŒ‘æˆ˜æˆç»©</div>
                <div class="result-item first-attempt">
                    <span>ç­”å¯¹é¢˜æ•°:</span> <span id="first-attempt-score"></span>
                </div>
                <div class="result-item first-attempt">
                    <span>æ­£ç¡®ç‡:</span> <span id="first-attempt-accuracy"></span>
                </div>
                <div class="result-item first-attempt">
                    <span>æŒ‘æˆ˜æ—¥æœŸ:</span> <span id="first-attempt-date"></span>
                </div>
            </div>
            
            <button id="restart-btn" class="btn">å†æ¥ä¸€æ¬¡</button>
        </div>
    </div>
    
    <div id="celebrate" class="celebrate"></div>
    
    <script>
        // æ ¹æ®æ‚¨æä¾›çš„å•è¯åˆ—è¡¨
        const gameData = [
            {
                word: "æ™‚é–“",
                type: "native",
                options: ["ã˜ãŒã‚“", "ã—ã‹ã‚“", "ã˜ã‹ã‚“", "ã—ãŒã‚“"],
                correct: 2
            },
            {
                word: "ã­ã ã‚“",
                type: "native",
                options: ["é‡‘é¡", "ä¾¡æ ¼", "å€¤æ®µ", "éšæ®µ"],
                correct: 2
            },
            {
                word: "å…ˆç”Ÿ",
                type: "native",
                options: ["ã›ã„ã›ã‚“", "ã›ã‚“ã›ã„", "ã›ã‚“ã›ã‚“", "ã›ã„ã›ã„"],
                correct: 1
            },
            {
                word: "ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹",
                type: "native",
                options: ["è¶…å¸‚", "å•†åœº", "å¹¿åœº", "æ ¡å›­"],
                correct: 3
            },
            {
                word: "æˆæ¥­",
                type: "native",
                options: ["ã˜ã‚…ã†ãã‚‡", "ã˜ã‚…ã†ãã‚‡ã†", "ã˜ã‚…ãã‚‡", "ã˜ã‚…ãã‚‡ã†"],
                correct: 3
            },
            {
                word: "æ•™å¸«",
                type: "native",
                options: ["ãã‚‡ã†ã—", "ãã‚‡ã—", "ãã‚‡ã†ã—", "ãã‚‡ã˜"],
                correct: 2
            },
            {
                word: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«",
                type: "native",
                options: ["è½¦ç¥¨", "æœˆå†", "å¹³è¡¡", "æ—¥ç¨‹"],
                correct: 3
            },
            {
                word: "ä¸€ç·’",
                type: "native",
                options: ["ã„ã£ã—ã‚‡", "ã„ã£ã—ã‚‡ã†", "ã„ã—ã‚‡", "ã„ã—ã‚‡ã†"],
                correct: 0
            },
            {
                word: "è¿·ã†",
                type: "native",
                options: ["ã¾ã‚†ã†", "ã¾ã‚ˆã†", "ã¾ã©ã†", "ã¾ã¨ã†"],
                correct: 1
            },
            {
                word: "æ—…é¤¨",
                type: "native",
                options: ["ã‚Šã‚‡ã†ã‹ã‚“", "ã‚Šã‚‡ã‹ã‚“", "ã—ã‚‡ã†ã‹ã‚“", "ã—ã‚…ã†ã‹ã‚“"],
                correct: 1
            },
            {
                word: "ç¾ã—ã„",
                type: "native",
                options: ["ã†ã‚Œã—ã„", "ã†ã™ãã—ã„", "ãŠã„ã—ã„", "ã†ã¤ãã—ã„"],
                correct: 3
            },
            {
                word: "æ˜¼é£Ÿ",
                type: "native",
                options: ["ã¡ã‚…ã†ã—ã‚‡ã", "ã—ã‚…ã†ã—ã‚‡ã", "ã¡ã‚‡ã†ã—ã‚‡ã", "ã—ã‚‡ã†ã—ã‚…ã"],
                correct: 0
            },
            {
                word: "ç†±æ„",
                type: "native",
                options: ["ã‚ã¤ã„", "ã­ã¤ã„", "ã˜ã‚‡ã†ã„", "ã‚ã¤ã„"],
                correct: 1
            },
            {
                word: "ã‚Œã‚“ã‚‰ã",
                type: "native",
                options: ["é€£çµ¡", "ç·´çµ¡", "è”çµ¡", "è“®çµ¡"],
                correct: 0
            },
            {
                word: "åŠ±ã¾ã™",
                type: "native",
                options: ["ã‚ã’ã¾ã™", "ã¾ã’ã¾ã™", "ã•ã’ã¾ã™", "ã¯ã’ã¾ã™"],
                correct: 3
            },
            {
                word: "ç´„æŸ",
                type: "native",
                options: ["ã‚ˆã†ã‚„ã", "ã‚ˆã‚„ã", "ã‚„ããã", "ã‚„ãã"],
                correct: 2
            },
            {
                word: "ã‚¢ãƒ‹ãƒ¡",
                type: "native",
                options: ["ç”µå½±", "æ¼«ç”»", "åŠ¨æ¼«", "ç”µè§†å‰§"],
                correct: 2
            },
            {
                word: "è·ç‰©",
                type: "native",
                options: ["ã«ã‚‚ã®", "ã‹ã¶ã¤", "ã«ã‚‚ã¤", "ã‹ã‚‚ã¤"],
                correct: 2
            },
            {
                word: "ã†ã‚“ã¦ã‚“",
                type: "native",
                options: ["é€£è»¢", "é‹è»¢", "è»¢é€£", "è»¢é‹"],
                correct: 1
            },
            {
                word: "ã‚»ãƒ¼ã‚¿ãƒ¼",
                type: "native",
                options: ["å¤–å¥—", "è¡¬è¡«", "æ¯›è¡£", "å›´å·¾"],
                correct: 2
            },
            {
                word: "å…ˆæ—¥",
                type: "native",
                options: ["ãœã‚“ã˜ã¤", "ãœã‚“ã«ã¡", "ã›ã‚“ã˜ã¤", "ã›ã‚“ã«ã¡"],
                correct: 2
            },
            {
                word: "éƒµä¾¿å±€",
                type: "native",
                options: ["ã‚†ã³ã‚“ãã‚‡ã", "ã‚†ã†ã³ã‚“ãã‚‡ã", "ã‚†ã³ã‚“ãã‚…ã", "ã‚†ã†ã³ã‚“ãã‚…ã"],
                correct: 1
            },
            {
                word: "ãƒãƒ£ãƒ¬ãƒ³ã‚¸",
                type: "native",
                options: ["æ©™å­", "æœºä¼š", "æ£€æŸ¥", "æŒ‘æˆ˜"],
                correct: 3
            },
            {
                word: "ã‚ãã‚‰ã‚ã‚‹",
                type: "native",
                options: ["æ­¢ã‚ã‚‹", "ç· ã‚ã‚‹", "è¾ã‚ã‚‹", "è«¦ã‚ã‚‹"],
                correct: 3
            },
            {
                word: "ç—…é™¢",
                type: "native",
                options: ["ã³ã‚‡ã†ã„ã‚“", "ã³ã‚ˆã†ã„ã‚“", "ã³ã‚‡ã„ã‚“", "ã³ã‚ˆã„ã‚“"],
                correct: 0
            }, 
            {
                word: "å…«ç™¾å±‹",
                type: "native",
                options: ["ã¯ã£ã´ã‚ƒãã‚„", "ã‚„ãŠã‚„", "ã‚ˆãŠã‚„", "ã‚ˆã†ã‹"],
                correct: 1
            },
            {
                word: "æ¶ˆã™",
                type: "native",
                options: ["ãã™", "ã‘ã™", "ã‹ã™", "ã•ã™"],
                correct: 1
            },
            {
                word: "æ±šã„",
                type: "native",
                options: ["ãã¤ã„", "ããŸãªã„", "ã‚ˆã”ãªã„", "ã‚ˆã”ã„"],
                correct: 1
            },
            {
                word: "é…ã‚Œã‚‹",
                type: "native",
                options: ["ãŠãã‚Œã‚‹", "ãŠãã‚Œã‚‹", "ã¡ãã‚Œã‚‹", "ãã‚Œã‚‹"],
                correct: 1
            },
            {
                word: "ãƒ›ãƒ†ãƒ«",
                type: "loan",
                options: ["å®¾é¦†", "å•†åœº", "å•æ‰€", "å¨æˆ¿"],
                correct: 0
            },
            {
                word: "è‹¦æ‰‹",
                type: "native",
                options: ["ãã¦", "ã«ãŒã¦", "ã¸ãŸ", "ã¸ã¦"],
                correct: 1
            },
            {
                word: "é›‘èªŒ",
                type: "native",
                options: ["ã–ã£ã—", "ã–ã—", "ã•ã£ã—", "ã•ã—"],
                correct: 0
            },
            {
                word: "é›¨",
                type: "native",
                options: ["ã‚ã‚", "ã‚ã‚", "ã‚†ã", "ã‹ãœ"],
                correct: 0
            },
            {
                word: "æ´¥æ³¢",
                type: "native",
                options: ["ã¤ãªã¿", "ã¤ã¿ãª", "ãªã¤ã¿", "ãªã¿ã¤"],
                correct: 0
            },
            {
                word: "ãã‚ã„",
                type: "native",
                options: ["æš—ã„", "é»’ã„", "ç™½ã„", "æ˜ã„"],
                correct: 1
            },
            {
                word: "ãã‚‰ã„",
                type: "native",
                options: ["å«Œã„", "ç¶ºéº—", "æœŸå¾…", "æ©Ÿæ¢°"],
                correct: 0
            },
            {
                word: "ç”˜ã„",
                type: "native",
                options: ["ã«ãŒã„", "ã‚ã¾ã„", "ã‚ã¾ã„", "ã“ã‚ã„"],
                correct: 2
            },
            {
                word: "ã‚¹ãƒ¼ãƒ„",
                type: "native",
                options: ["è¢œå­", "è¥¿è£…", "è¡¬è¡«", "è£¤å­"],
                correct: 1
            },
            {
                word: "ä¸ƒå¤•",
                type: "native",
                options: ["ãŸãªã°ãŸ", "ã¯ãªãŸã°", "ãŸãªãŸã°", "ã¯ãªã°ãŸ"],
                correct: 0
            },
            {
                word: "æ´—ã†",
                type: "native",
                options: ["ã¯ã‚‰ã†", "ã‚ã‚‰ã†", "ã‚ã‚‰ã†", "ã‚†ã‚‰ã†"],
                correct: 2
            },
            {
                word: "æ›‡ã‚Š",
                type: "native",
                options: ["ãã¾ã‚Š", "ãã‚‚ã‚Š", "ã‘ã‚€ã‚Š", "ã“ã‚‚ã‚Š"],
                correct: 1
            }, 
            {
                word: "ã‚³ãƒ”ãƒ¼",
                type: "native",
                options: ["å’–å•¡", "ä¾¿åˆ©åº—", "å¤å°", "æ‰“å­—"],
                correct: 2
            }, 
            {
                word: "æ¥½ã—ã„",
                type: "native",
                options: ["ãŠã—ã„", "ãŠã„ã—ã„", "ãŸã®ã—ã„", "ã†ã‚Œã—ã„"],
                correct: 2
            }, 
            {
                word: "è¾›ã„",
                type: "native",
                options: ["ã‹ã‚‹ã„", "ã«ãã„", "ã‚„ã™ã„", "ã‹ã‚‰ã„"],
                correct: 3
            },
            {
                word: "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚·ãƒƒãƒ—",
                type: "native",
                options: ["å®ä¹ ", "äº’è”ç½‘", "å…´è¶£å°ç»„", "åŒå­¦"],
                correct: 0
            },
            {
                word: "åˆ‡æ‰‹",
                type: "native",
                options: ["ãã·", "ãã£ã·", "ãã¦", "ãã£ã¦"],
                correct: 3
            },
            {
                word: "å»ºç‰©",
                type: "native",
                options: ["ãŸã¦ã‚‚ã®", "ã‘ã‚“ã‚‚ã®", "ãŸã¦ã¶ã¤", "ã‘ã‚“ã‚‚ã¤"],
                correct: 0
            },
            {
                word: "ã‚¹ãƒ¼ãƒ‘ãƒ¼",
                type: "native",
                options: ["å•†åœº", "ä¾¿åˆ©åº—", "è¶…å¸‚", "æ´¾å¯¹"],
                correct: 2
            },
            {
                word: "å¤§å¤‰",
                type: "native",
                options: ["ãŸã¸ã‚“", "ãŸã„ã¸ã‚“", "ã ã¸ã‚“", "ã ã„ã¸ã‚“"],
                correct: 1
            },
            {
                word: "è¡°ãˆã‚‹",
                type: "native",
                options: ["ãŠã©ã‚ãˆã‚‹", "ã•ãŒãˆã‚‹", "ãŠã¨ã‚ãˆã‚‹", "ã•ã‹ãˆã‚‹"],
                correct: 2
            },
            {
                word: "ã‚¨ã‚¢ã‚³ãƒ³",
                type: "native",
                options: ["ç©ºè°ƒ", "ç”µè§†", "ç”µè„‘", "çª—æˆ·"],
                correct: 0
            },
            {
                word: "è‡ªè»¢è»Š",
                type: "native",
                options: ["ã˜ã§ã‚“ã—ã‚ƒ", "ã˜ã©ã†ã—ã‚ƒ", "ã˜ã¦ã‚“ã—ã‚ƒ", "ã˜ã¨ã†ã—ã‚ƒ"],
                correct: 2
            },
            {
                word: "å¤§ãã„",
                type: "native",
                options: ["ãŠãŠãã„", "ã¡ã„ã•ã„", "ãªãŒã„", "ã¿ã˜ã‹ã„"],
                correct: 0
            },
            {
                word: "ä¸Šæ‰‹",
                type: "native",
                options: ["ã˜ã‚‡ã†ãš", "ã†ãˆã¦", "ã‹ã¿ã¦", "ã˜ã‚‡ã†ã¦"],
                correct: 0
            },
            {
                word: "å…¬åœ’",
                type: "native",
                options: ["ã“ã†ãˆã‚“", "ã“ãˆã‚“", "ã“ã†ãˆã„", "ã“ãˆã„"],
                correct: 0
            },
            {
                word: "æ˜ ç”»",
                type: "native",
                options: ["ãˆã„ãŒ", "ãˆãŒ", "ãˆã„ã‹", "ãˆã‹"],
                correct: 0
            },
            {
                word: "ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³",
                type: "loan",
                options: ["é¤å…", "é…’åº—", "å’–å•¡é¦†", "é…’å§"],
                correct: 0
            },
            {
                word: "å¯’ã„",
                type: "native",
                options: ["ã•ã‚€ã„", "ã¤ã‚ãŸã„", "ã‚ã¤ã„", "ã‚ã‹ã„"],
                correct: 0
            },
            {
                word: "ç‰›ä¹³",
                type: "native",
                options: ["ãã‚…ã†ã«ã‚…ã†", "ãã‚…ã†ã«ã‚…", "ãã‚…ã«ã‚…ã†", "ãã‚…ã†ã«ã‚…ã†"],
                correct: 0
            },
            {
                word: "åœ°ä¸‹é‰„",
                type: "native",
                options: ["ã¡ã‹ã¦ã¤", "ã˜ã‹ã¦ã¤", "ã¡ã‹ã§ã‚“", "ã˜ã‹ã§ã‚“"],
                correct: 0
            },
            {
                word: "å®‰ã„",
                type: "native",
                options: ["ã‚„ã™ã„", "ãŸã‹ã„", "ãŠãŠã„", "ã™ããªã„"],
                correct: 0
            },
            {
                word: "ç¢ºèª",
                type: "native",
                options: ["ã‹ãã«ã‚“", "ã‹ã£ã«ã‚“", "ã‹ãã­ã‚“", "ã‹ã£ã­ã‚“"],
                correct: 0
            },
            {
                word: "èª¿æŸ»",
                type: "native",
                options: ["ã¡ã‚‡ã†ã•", "ã¡ã‚‡ã†ã—ã‚ƒ", "ã¡ã‚…ã†ã•", "ã¡ã‚…ã†ã—ã‚ƒ"],
                correct: 0
            },
            {
                word: "ãƒšãƒƒãƒˆ",
                type: "native",
                options: ["åºŠ", "æ¡Œå­", "æ¤…å­", "å® ç‰©"],
                correct: 3
            },
            {
                word: "è§£æ±º",
                type: "native",
                options: ["ã‹ã„ã‘ã¤", "ã‹ã„ã‹ã¤", "ãŒã„ã‘ã¤", "ãŒã„ã‹ã¤"],
                correct: 0
            },
            {
                word: "æ²»ã‚‹",
                type: "native",
                options: ["ã¡ã‚‹", "ã®ã“ã‚‹", "ãªãŠã‚‹", "ã—ã‹ã‚‹"],
                correct: 2
            },
            {
                word: "æ–°ã—ã„",
                type: "native",
                options: ["ã‚ãŸã‚‰ã—ã„", "ã‚ã¤ã„", "ãµã‚‹ã„", "ãŠã‚‚ã—ã‚ã„"],
                correct: 0
            },
            {
                word: "å¤§äºº",
                type: "native",
                options: ["ãŠã¨ã“", "ãŠã‚“ãª", "ãŠã¨ãª", "ãŠã“ãª"],
                correct: 2
            },
            {
                word: "ãƒ“ãƒ«",
                type: "native",
                options: ["å•¤é…’", "å¤§å¦", "å’–å•¡", "ç™½é…’"],
                correct: 1
            },
            {
                word: "è¦å‰‡",
                type: "native",
                options: ["ããã", "ããã", "ããã", "ããã"],
                correct: 0
            },
            {
                word: "ãŸã®ã‚€",
                type: "native",
                options: ["æ‚©ã‚€", "é ¼ã‚€", "ä¼‘ã‚€", "å¥½ã‚€"],
                correct: 1
            },
            {
                word: "ã—ã‚‰ã¹ã‚‹",
                type: "native",
                options: ["æ¯”ã¹ã‚‹", "ä¸¦ã¹ã‚‹", "èª¿ã¹ã‚‹", "è¿°ã¹ã‚‹"],
                correct: 2
            },
            {
                word: "å±é™º",
                type: "native",
                options: ["ãã‘ã‚“", "ãã‘ã‚“", "ãã’ã‚“", "ãã’ã‚“"],
                correct: 0
            },
            {
                word: "è‡ªç”±",
                type: "native",
                options: ["ã˜ã‚†ã†", "ã˜ã‚…ã†", "ã˜ã‚†", "ã˜ã‚…"],
                correct: 0
            },
            {
                word: "ç›®çš„",
                type: "native",
                options: ["ã‚‚ãã¦ã", "ã‚‚ãã§ã", "ã‚‚ã£ã¦ã", "ã‚‚ã§ã„"],
                correct: 0
            },
            {
                word: "å£Šã™",
                type: "native",
                options: ["ããšã™", "ã“ã‚ã™", "ã¯ãšã™", "ã‚ˆã”ã™"],
                correct: 1
            },
            {
                word: "ã‚¹ãƒˆãƒ¼ãƒ–",
                type: "native",
                options: ["å›´å·¾", "æŠ«è‚©", "ç«ç‚‰", "åœæ­¢"],
                correct: 2
            },
            {
                word: "ã“ã†ã¨ã†",
                type: "native",
                options: ["è¡Œå‹•", "è¬›å ‚", "é«˜åº¦", "å£é ­"],
                correct: 3
            },
            {
                word: "ãƒ–ãƒ¬ã‚¹ãƒ¬ãƒƒãƒˆ",
                type: "native",
                options: ["è€³ç¯", "æ‰‹é“¾", "è¿è¡£è£™", "é¡¹é“¾"],
                correct: 1
            },
            {
                word: "è²¯é‡‘",
                type: "native",
                options: ["ã¡ã‚‡ã£ãã‚“", "ãŸã‚ãã‚“", "ã¡ã‚‡ãã‚“", "ãŸã‚ãŒã­"],
                correct: 2
            }, 
            {
                word: "ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ",
                type: "native",
                options: ["å¯†ç ", "ç­¾è¯", "æŠ¤ç…§", "é“¶è¡Œå¡"],
                correct: 2
            },
            {
                word: "ç¾¨ã¾ã—ã„",
                type: "native",
                options: ["ã‚ã¤ã‹ã¾ã—ã„", "ã‚ã–ã¾ã—ã„", "ã‚ã‚„ã¾ã—ã„", "ã†ã‚‰ã‚„ã¾ã—ã„"],
                correct: 3
            },
            {
                word: "ã¨ã‚ã‚‹",
                type: "native",
                options: ["è¾ã‚ã‚‹", "è²¯ã‚ã‚‹", "æ³Šã‚ã‚‹", "å†·ã‚ã‚‹"],
                correct: 2
            },
            {
                word: "é›£ã—ã„",
                type: "native",
                options: ["ãŸã®ã—ã„", "ãã³ã—ã„", "ã‚€ãšã‹ã—ã„", "ãã‚„ã—ã„"],
                correct: 2
            },
            {
                word: "ã‚ºãƒœãƒ³",
                type: "native",
                options: ["è£¤å­", "è¢œå­", "æŒ‰é’®", "è¡¬è¡«"],
                correct: 0
            },
            {
                word: "ãã‹ã",
                type: "native",
                options: ["è¨ˆç”»", "ä¼ç”»", "å¥‘æ©Ÿ", "æ©Ÿä¼š"],
                correct: 1
            },
            {
                word: "åå¿œ",
                type: "native",
                options: ["ã»ã‚“ã®ã†", "ã¯ã‚“ã®ã†", "ãŸã‚“ã®ã†", "ã»ã‚“ãŠã†"],
                correct: 1
            },
            {
                word: "ãƒãƒƒã‚°",
                type: "native",
                options: ["é¢è†œ", "åŒ…", "å£ç½©", "æ‰‹å¥—"],
                correct: 1
            },
            {
                word: "äºˆå®š",
                type: "native",
                options: ["ã‚ˆã†ã¦ã„", "ã‚ˆã¦", "ã‚ˆã¦ã„", "ã‚ˆã†ã¦"],
                correct: 2
            },
            {
                word: "ãƒ¬ãƒãƒ¼ãƒˆ",
                type: "native",
                options: ["ä½œä¸š", "ç¬”è®°æœ¬", "æŠ¥å‘Š", "æŠ¤ç…§"],
                correct: 2
            },
            {
                word: "æœ‰å",
                type: "native",
                options: ["ã‚†ã‚", "ã‚†ã†ã‚ãˆ", "ã‚†ã‚ã„", "ã‚†ã†ã‚ã„"],
                correct: 3
            },
            {
                word: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
                type: "native",
                options: ["ä¼ çœŸ", "æ¶ˆæ¯", "æ•°æ®", "é‚®ä»¶"],
                correct: 1
            },
            {
                word: "ç«‹æ´¾",
                type: "native",
                options: ["ã‚Šã£ã±ã„", "ã‚Šã£ã±", "ã„ã£ã±ã„", "ã—ã£ã±ã„"],
                correct: 1
            },
            {
                word: "ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ",
                type: "native",
                options: ["æ¼”å”±ä¼š", "æ¯”èµ›", "ä¾¿åˆ©åº—", "äº¤æµ"],
                correct: 1
            },
            {
                word: "è§¦ã‚‹",
                type: "native",
                options: ["ã•ã‚ã‚‹", "ãµã‚Œã‚‹", "ã—ã‚‡ãã‚‹", "ãµã‚‹"],
                correct: 0
            },
            {
                word: "é¤Šã†",
                type: "native",
                options: ["ã†ã—ãªã†", "ã‚ˆã†ã†", "ã‚ˆã—ãªã†", "ã‚„ã—ãªã†"],
                correct: 3
            },
            {
                word: "å¦¥å”",
                type: "native",
                options: ["ã ã£ãã‚‡ã†", "ã ãã‚‡ã†", "ãŸã£ãã‚‡ã†", "ãŸãã‚‡ã†"],
                correct: 1
            },
            {
                word: "è†¨ã‚‰ã‚€",
                type: "native",
                options: ["ãŸãã‚‰ã‚€", "ã†ããŸã‚€", "ãµãã‚‰ã‚€", "ã¼ã†ã‚‰ã‚€"],
                correct: 2
            },
            {
                word: "æ²¸ã‹ã™",
                type: "native",
                options: ["ãµã‹ã™", "ã‚ã‹ã™", "ãŠã‹ã™", "ã‚†ã‹ã™"],
                correct: 1
            },
            {
                word: "ç©ã‚„ã‹",
                type: "native",
                options: ["ã«ãã‚„ã‹", "ãŠã ã‚„ã‹", "ã•ã‚ã‚„ã‹", "ã™ã¿ã‚„ã‹"],
                correct: 1
            }
        ];

        // æ¸¸æˆå˜é‡
        let currentQuestion = 0;
        let score = 0;
        let timer;
        let timeLeft = 180; // 3åˆ†é’Ÿ = 180ç§’
        let studentId = "";
        let studentName = "";
        let playerRecords = JSON.parse(localStorage.getItem('playerRecords')) || [];
        let firstAttemptRecord = null;
        
        // DOMå…ƒç´ 
        const loginScreen = document.getElementById('login-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const timerDisplay = document.getElementById('timer');
        const wordDisplay = document.getElementById('word-display');
        const optionsGrid = document.getElementById('options-grid');
        const progressBar = document.getElementById('progress-bar');
        const resultName = document.getElementById('result-name');
        const resultId = document.getElementById('result-id');
        const resultScore = document.getElementById('result-score');
        const resultAccuracy = document.getElementById('result-accuracy');
        const firstAttemptContainer = document.getElementById('first-attempt-container');
        const firstAttemptScore = document.getElementById('first-attempt-score');
        const firstAttemptAccuracy = document.getElementById('first-attempt-accuracy');
        const firstAttemptDate = document.getElementById('first-attempt-date');
        
        // å¼€å§‹æ¸¸æˆ
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', restartGame);
        
        function startGame() {
            studentId = document.getElementById('student-id').value.trim();
            studentName = document.getElementById('student-name').value.trim();
            
            if (!studentId || !studentName) {
                alert('è¯·è¾“å…¥å­¦å·å’Œå§“å');
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯é‡å¤ç©å®¶å¹¶è·å–ç¬¬ä¸€æ¬¡è®°å½•
            const playerAllRecords = playerRecords.filter(record => 
                record.id === studentId && record.name === studentName
            );
            
            if (playerAllRecords.length > 0) {
                firstAttemptRecord = playerAllRecords[0]; // ç¬¬ä¸€æ¬¡è®°å½•æ€»æ˜¯åœ¨æœ€å‰é¢
            }
            
            loginScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            startTimer();
            showQuestion();
        }
        
        function showQuestion() {
            if (currentQuestion >= gameData.length) {
                endGame();
                return;
            }
            
            const question = gameData[currentQuestion];
            wordDisplay.textContent = question.word;
            
            // æ›´æ–°è¿›åº¦æ¡
            progressBar.style.width = `${(currentQuestion / gameData.length) * 100}%`;
            
            // æ¸…ç©ºé€‰é¡¹
            optionsGrid.innerHTML = '';
            
            // åˆ›å»ºé€‰é¡¹çš„å‰¯æœ¬å¹¶éšæœºæ’åºï¼ˆä½†ä¿æŒæ­£ç¡®ç­”æ¡ˆçš„ä½ç½®ï¼‰
            let options = [...question.options];
            let correctAnswer = options[question.correct];
            
            // éšæœºæ’åºé€‰é¡¹ï¼ˆä¸åŒ…æ‹¬æ­£ç¡®ç­”æ¡ˆï¼‰
            options.splice(question.correct, 1);
            shuffleArray(options);
            
            // éšæœºæ’å…¥æ­£ç¡®ç­”æ¡ˆçš„ä½ç½®
            const correctPosition = Math.floor(Math.random() * (options.length + 1));
            options.splice(correctPosition, 0, correctAnswer);
            const newCorrectIndex = correctPosition;
            
            // æ·»åŠ é€‰é¡¹
            options.forEach((option, index) => {
                const optionBtn = document.createElement('div');
                optionBtn.className = 'option-btn';
                optionBtn.textContent = option;
                optionBtn.addEventListener('click', () => checkAnswer(index, newCorrectIndex));
                optionsGrid.appendChild(optionBtn);
            });
        }
        
        // æ´—ç‰Œç®—æ³•
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function checkAnswer(selectedIndex, correctIndex) {
            if (selectedIndex === correctIndex) {
                score++;
                // ç­”å¯¹æ—¶çš„è§†è§‰æ•ˆæœ
                optionsGrid.children[selectedIndex].style.backgroundColor = 'rgba(40, 167, 69, 0.2)';
                optionsGrid.children[selectedIndex].style.borderColor = 'var(--success)';
            } else {
                // ç­”é”™æ—¶çš„è§†è§‰æ•ˆæœ
                optionsGrid.children[selectedIndex].style.backgroundColor = 'rgba(220, 53, 69, 0.2)';
                optionsGrid.children[selectedIndex].style.borderColor = 'var(--danger)';
                // æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
                optionsGrid.children[correctIndex].style.backgroundColor = 'rgba(40, 167, 69, 0.2)';
                optionsGrid.children[correctIndex].style.borderColor = 'var(--success)';
            }
            
            // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
            const optionButtons = document.querySelectorAll('.option-btn');
            optionButtons.forEach(button => {
                button.style.pointerEvents = 'none';
            });
            
            // 1ç§’åè¿›å…¥ä¸‹ä¸€é¢˜
            setTimeout(() => {
                currentQuestion++;
                showQuestion();
            }, 1000);
        }
        
        function startTimer() {
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    endGame();
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function endGame() {
            clearInterval(timer);
            gameScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            // ä¿å­˜ç©å®¶è®°å½•
            const newRecord = {
                id: studentId,
                name: studentName,
                score: score,
                total: gameData.length,
                date: new Date().toISOString()
            };
            playerRecords.push(newRecord);
            localStorage.setItem('playerRecords', JSON.stringify(playerRecords));
            
            // æ˜¾ç¤ºç»“æœ
            resultName.textContent = studentName;
            resultId.textContent = studentId;
            resultScore.textContent = `${score} / ${gameData.length}`;
            resultAccuracy.textContent = `${Math.round((score / gameData.length) * 100)}%`;
            
            // å¦‚æœæœ‰ç¬¬ä¸€æ¬¡è®°å½•ï¼Œæ˜¾ç¤ºç¬¬ä¸€æ¬¡æˆç»©
            if (firstAttemptRecord) {
                firstAttemptContainer.classList.remove('hidden');
                firstAttemptScore.textContent = `${firstAttemptRecord.score} / ${firstAttemptRecord.total}`;
                firstAttemptAccuracy.textContent = `${Math.round((firstAttemptRecord.score / firstAttemptRecord.total) * 100)}%`;
                
                // æ ¼å¼åŒ–æ—¥æœŸ
                const date = new Date(firstAttemptRecord.date);
                firstAttemptDate.textContent = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
            } else {
                firstAttemptContainer.classList.add('hidden');
            }
            
            // å¦‚æœæˆç»©å¥½ï¼Œæ˜¾ç¤ºåº†ç¥æ•ˆæœ
            if (score / gameData.length >= 0.8) {
                showCelebration();
            }
        }
        
        function restartGame() {
            currentQuestion = 0;
            score = 0;
            timeLeft = 180;
            
            resultScreen.classList.add('hidden');
            loginScreen.classList.remove('hidden');
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('student-id').value = '';
            document.getElementById('student-name').value = '';
        }
        
        function showCelebration() {
            // ç®€å•çš„åº†ç¥æ•ˆæœ
            const celebrate = document.getElementById('celebrate');
            celebrate.style.display = 'block';
            celebrate.innerHTML = `
                <div style="position:absolute;top:20%;left:50%;font-size:3rem;color:gold;">ğŸ‰</div>
                <div style="position:absolute;top:30%;left:20%;font-size:2rem;color:gold;">âœ¨</div>
                <div style="position:absolute;top:70%;left:80%;font-size:2.5rem;color:gold;">ğŸŒŸ</div>
                <div style="position:absolute;top:50%;left:10%;font-size:3rem;color:gold;">ğŸŠ</div>
                <div style="position:absolute;top:60%;left:70%;font-size:2rem;color:gold;">ğŸ¥³</div>
            `;
            
            // 3ç§’åéšè—
            setTimeout(() => {
                celebrate.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>